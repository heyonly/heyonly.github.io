---
layout: post
title: 线程&队列
categories: Objective-C
description: 线程&队列
keywords: 线程，队列，线程&队列
---

在提出一些概念前，我们先来看两段代码


```
- (void)viewDidLoad {
    [super viewDidLoad];
    
    NSLog(@"1111");
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@"2222");
    });
}
```
问题：输出是什么？



第二个：




```
- (void)viewDidLoad {
    [super viewDidLoad];
    
    dispatch_queue_t queue1 = dispatch_queue_create("com.apple.queue1", DISPATCH_QUEUE_SERIAL);
    NSLog(@"start");
    dispatch_async(queue1, ^{
        sleep(5);
        NSLog(@"1 -- %@",[NSThread currentThread]);
    });
    
    dispatch_sync(queue1, ^{
        sleep(5);
        NSLog(@"2 -- %@",[NSThread currentThread]);
    });
    sleep(5);
    NSLog(@"finished");
 }
```
问题：耗时多长？










参考：

[1] \: [深入理解 GCD](https://bestswifter.com/deep-gcd/)


[1] \: [[Objective-C]深入理解GCD](https://cloud.tencent.com/developer/article/1341657)


[1] \: [https://opensource.apple.com/tarballs/libdispatch/](https://opensource.apple.com/tarballs/libdispatch/)



[1] \: [探秘Runtime - Runtime源码分析](https://juejin.im/entry/5bf7c92a6fb9a049d7475705)
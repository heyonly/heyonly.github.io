---
layout: post
title: iOS之lldb 调试技巧 
categories: blog
description: lldb 的调试技巧
keywords: lldb
---
<h2>前言</h2>



在程序员的路上，bug 总是伴随而行，遇到bug 怎么办？当然是解决啦，解决bug 调试必不可少，。工欲善其事，必先利其器，今天来说说iOS的额调试：lldb         



自己开发的，有源码，直接使用xcode 进入调试模式即可，没什么好讲的。当看到别人开发的APP，我们想学习学习，想一探究竟怎么办呢。今天讲讲怎么调试别人的APP。




废话不多说，开始

<h4>准备工作</h4>
```
MacPro$ ls /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/
硌，你会看到以下结果
10.0/         10.2 (14C89)/ 8.1/          8.3/          9.0/          9.2/         
10.1/         8.0/          8.2/          8.4/          9.1/          9.3/

```
选择一个版本，适合你的iOS系统的，


```
MacPro$ hdiutil attach /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/10.0/DeveloperDiskImage.dmg
正在检查“whole disk (Apple_HFS : 0)”的校验和…
............................................................................................................................
          whole disk (Apple_HFS : 0)：已验证   CRC32 $5C04483F
已验证   CRC32 $29502FEA
/dev/disk3          	                               	/Volumes/DeveloperDiskImage
```
```
MacPro$ ls /Volumes/DeveloperDiskImage/usr/bin/
DTDeviceArbitration	XcodeDeviceMonitor	debugserver		xctest
ScreenShotr		axauditd		iprofiler
```

这时在/Volumes/DeveloperDiskImage/usr/bin/ 看到debugserver 了


```
MacPro$ codesign -s - --entitlements entitlements.plist -f debugserver
```
entilements.plist 的内容如下
```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/ PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.springboard.debugapplications</key> <true/>
    <key>run-unsigned-code</key> <true/>
    <key>get-task-allow</key> <true/>
    <key>task_for_pid-allow</key> <true/>
</dict> 
</plist>
```
然后把debugserver 拷贝到手机上
```
MacPro$ scp ./debugserver root@192.168.0.101:/usr/bin/
```


慢着，记得看看debugserver 的权限


```
#chmod +x /usr/bin/debugserver
```
```
# debugserver *:6666 -a Preferences
```
嗯，等个1分钟就可以了
```
$ lldb
(lldb) platform select remote-ios
(lldb) process connect connect://192.168.0.101:6666

debugserver-310.2 for armv7.
Attaching to process Preferences...
Listening to port 6666 for a connection from *...
```

嗯，这里等了几分钟终于看到结果了。


![](/images/blog/f7c13212b5c3b9918ff4e6f70a3095d0.gif)







